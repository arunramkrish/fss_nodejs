<!DOCTYPE html>
<!-- saved from url=(0035)https://www.npmjs.com/package/mysql -->
<html lang="en" prefix="og: http://ogp.me/ns#" class=" js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">.autocomplete-container {  overflow: visible;}.autocomplete-suggestions {  border: 1px solid #999;  background: #FFF;  overflow-x: hidden;  overflow-y: auto;  cursor: default;}.autocomplete-suggestion {  padding: 2px 5px;  white-space: nowrap;  overflow: hidden;}.autocomplete-selected {  background: #F0F0F0;}.autocomplete-container strong {  font-weight: bold;}#powered-by-constructor-io {  font-size: 0.8em;  text-align:right;  background-color:rgb(255,255,192);  font-family:sans-serif;  padding: 4px 10px;  position: absolute;  border: 1px solid #999;}#constructorio-backing-node {  background-color:rgb(255,255,255);  padding: 4px 10px;  position: absolute;  border: 1px solid #FFF;}.autocomplete-suggestion-image {  float:left;  padding-right: 10px;}#autocomplete-direct-results:before {  content:'Products'}#autocomplete-search-container:before {  content:'Search Suggestions'}.autocomplete-suggestion-description {  font-size: 0.8em;  display: block;  margin-left: 10px;  line-height: 1.0em;}</style>
  
  <script type="text/javascript" src="./96_mysql_nodejs_files/ba86f45fc4"></script><script src="./96_mysql_nodejs_files/nr-892.min.js"></script><script async="" src="./96_mysql_nodejs_files/analytics.js"></script><script nonce="e6645c0da88f17bd6af0a1b77315ff8e30e373c24993bd4ad909d22b34553d8d952faeb4092538c325efee346b7c503b87cf5bf87c40c4587b4523bcf94d251e" type="text/javascript">window.NREUM||(NREUM={});NREUM.info = {"agent":"","beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"ba86f45fc4","applicationID":"9556514","applicationTime":378.364509,"transactionName":"M1BXZxFZVkQFURBdVwoafVITURdwIWZLG0gFVl5SBF0XTBRTB19ZA1BI","queueTime":0,"ttGuid":"23f77508a5eb0a","agentToken":null}; window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=(""+location).split("?")[0],l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-892.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>
  <title>mysql</title>

    <meta name="description" content="A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.">
    <meta property="og:description" content="A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.">
    <meta property="og:title" content="mysql">
    <meta property="og:url" content="https://www.npmjs.com/package/mysql">
    <meta property="og:site_name" content="npm">
    <meta name="keywords" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://www.npmjs.com/package/mysql">
    <meta name="twitter:title" content="npm: mysql">
    <meta name="twitter:description" content="A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.">
  
  
  <meta http-equiv="cleartype" content="on">
  
  <meta name="apple-mobile-web-app-capable" content="no">
  
  
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,initial-scale=1,user-scalable=yes">
  
  <meta name="x-npm:ga:id" content="UA-47041310-1">
  <meta name="x-npm:ga:dimensions" content="{&quot;aboveChrome&quot;:&quot;dimension1&quot;,&quot;belowHeader&quot;:&quot;dimension3&quot;,&quot;packagePage&quot;:&quot;dimension2&quot;}">
  
  <link rel="canonical" href="https://www.npmjs.com/package/mysql">
  <link rel="search" type="application/opensearchdescription+xml" href="https://www.npmjs.com/opensearch.xml" title="npm">

    <link rel="stylesheet" media="all" href="./96_mysql_nodejs_files/index.861cdb76.css">

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="./96_mysql_nodejs_files/css">
  
    <script src="./96_mysql_nodejs_files/index.min.1aeef73a.js"></script><style type="text/css"></style>
    <style>
      .marketing {
  margin: 0px;
  margin-left: -10px;
  margin-bottom: 40px;
  padding: 0px 0px;
  font-size: 15px;
  font-style: normal;
  fond-variant: normal;
  fort-weight: normal;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 2px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  color: rgba(0, 0, 0, 0.4);
  text-decoration: none;
  letter-spacing: -0.03em;
  line-height: 22.5px;
  }
  
  .marketing a {
  font-weight: 400;
  text-decoration: none;
  color: #cb3837;
  }
  
  .marketing h3 {
  display: block;
  margin: 0;
  padding: 20px 0 10px 0;
  font-size: 20px;
  font-style: normal;
  font-variant: normal;
  font-weight: 400;
  line-height: 22px;
  text-decoration: none;
  color: rgba(0, 0, 0, 0.8);
  }
  
  .marketing h3 a {
  color: rgba(0, 0, 0, 0.8);
  }
  
  .marketing h3 a:hover {
  color: #cb3837;
  }
  
  .marketing p {
  line-height: 22.5px;
  margin-left: 10px;
  margin-right: 10px;
  }
  
  .marketing p a {
  white-space: nowrap;
  }
  
  #marketing-texthed {
  margin-left: 10px;
  }
    </style>
  <link rel="apple-touch-icon" sizes="57x57" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-icon-180x180.png">
  <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-1024x748.png">
  <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-1536x2008.png">
  <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-2048x1496.png">
  <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-320x460.png">
  <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-640x1096.png">
  <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-640x920.png">
  <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="https://www.npmjs.com/static/images/touch-icons/apple-touch-startup-image-768x1004.png">
  <link rel="icon" type="image/png" href="https://www.npmjs.com/static/images/touch-icons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://www.npmjs.com/static/images/touch-icons/favicon-230x230.png" sizes="230x230">
  <link rel="icon" type="image/png" href="https://www.npmjs.com/static/images/touch-icons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://www.npmjs.com/static/images/touch-icons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://www.npmjs.com/static/images/touch-icons/coast-228x228.png" sizes="228x228">
  <link rel="icon" type="image/png" href="https://www.npmjs.com/static/images/touch-icons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://www.npmjs.com/static/images/touch-icons/manifest.json">
  <link rel="shortcut icon" href="https://www.npmjs.com/static/images/touch-icons/favicon.ico">
  <link rel="yandex-tableau-widget" href="https://www.npmjs.com/static/images/touch-icons/yandex-browser-manifest.json">
  <meta property="og:image" content="https://www.npmjs.com/static/images/touch-icons/open-graph.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="msapplication-TileColor" content="#cb3837">
  <meta name="msapplication-TileImage" content="/static/images/touch-icons/mstile-144x144.png">
  <meta name="msapplication-config" content="/static/images/touch-icons/browserconfig.xml">
  <meta name="theme-color" content="#cb3837">

<style>.autocomplete-container, .autocomplete-suggestions, #powered-by-constructor-io { width: 954px !important }</style><style id="iconic-responsive-css" type="text/css">/* Iconic Responsive Support Styles */
.iconic-property-fill, .iconic-property-text {stroke: none !important;}
.iconic-property-stroke {fill: none !important;}
svg.iconic.iconic-fluid {height:100% !important;width:100% !important;}
svg.iconic.iconic-sm:not(.iconic-size-md):not(.iconic-size-lg), svg.iconic.iconic-size-sm{width:16px;height:16px;}
svg.iconic.iconic-md:not(.iconic-size-sm):not(.iconic-size-lg), svg.iconic.iconic-size-md{width:32px;height:32px;}
svg.iconic.iconic-lg:not(.iconic-size-sm):not(.iconic-size-md), svg.iconic.iconic-size-lg{width:128px;height:128px;}
svg.iconic-sm > g.iconic-md, svg.iconic-sm > g.iconic-lg, svg.iconic-md > g.iconic-sm, svg.iconic-md > g.iconic-lg, svg.iconic-lg > g.iconic-sm, svg.iconic-lg > g.iconic-md {display: none;}
svg.iconic.iconic-icon-sm > g.iconic-lg, svg.iconic.iconic-icon-md > g.iconic-lg {display:none;}
svg.iconic-sm:not(.iconic-icon-md):not(.iconic-icon-lg) > g.iconic-sm, svg.iconic-md.iconic-icon-sm > g.iconic-sm, svg.iconic-lg.iconic-icon-sm > g.iconic-sm {display:inline;}
svg.iconic-md:not(.iconic-icon-sm):not(.iconic-icon-lg) > g.iconic-md, svg.iconic-sm.iconic-icon-md > g.iconic-md, svg.iconic-lg.iconic-icon-md > g.iconic-md {display:inline;}
svg.iconic-lg:not(.iconic-icon-sm):not(.iconic-icon-md) > g.iconic-lg, svg.iconic-sm.iconic-icon-lg > g.iconic-lg, svg.iconic-md.iconic-icon-lg > g.iconic-lg {display:inline;}</style></head>

<body itemscope="" itemtype="http://schema.org/WebSite" data-crumb="FOvXka-lUBL_fObPFHF7MPmDYIHoITrQoMmU1iJqZoV">
  <meta itemprop="url" content="https://www.npmjs.com/">


  <header class="anonymous ">
    <!-- logo -->
    <div class="header-item brand-container">
      <div class="logo-container" id="npm-logo">
        <a href="https://www.npmjs.com/"><img src="./96_mysql_nodejs_files/npm-logo.svg" alt="npm logo"></a>
      </div>
    </div>
    <!-- /logo -->
  
  
    <!-- search -->
    <div class="header-item header-search-container">
      <form class="site-search" id="npm-search" action="https://www.npmjs.com/search" method="get" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
        <meta itemprop="target" content="https://www.npmjs.com/search?q={q}">
        <div id="site-search-container">
            <input name="q" value="" type="search" id="site-search" placeholder="find packages" tabindex="1" autocorrect="off" autocapitalize="off" itemprop="query-input" autocomplete="off">
        </div>
        <input type="submit">
      </form>
    </div>
  
    <!-- menu 1 -->
    <div class="header-item user-info-container">
      <div class="user-info">
          <ul class="user-info-salutation single">
            <li><a href="https://www.npmjs.com/signup">sign up</a> or <a href="https://www.npmjs.com/login">log in</a></li>
            <li><a href="https://www.npmjs.com/login"><span class="a11y-only">log in</span><span class="icon icon-wombat-head-login"></span></a></li>
          </ul>
      </div> <!-- .user-info -->
    </div>
    <!-- /menu 1 -->
  
    <!-- menu 2 -->
    <div class="header-item header-nav-menu-container">
      <a href="https://www.npmjs.com/package/mysql#" id="npm-expansions" class="npm-expansions" data-event-trigger="click" data-event-name="npm-expansions">Neurotic Pink Mongooses</a>
  
      <div class="nav-menu-container" role="navigation">
        <a class="nav-toggle drop-down-menu-toggle" href="https://www.npmjs.com/package/mysql#product-navigation"><span class="a11y-only">Toggle Navigation</span>
          <img alt="mobile navigation menu" src="./96_mysql_nodejs_files/mobile-menu.png">
        </a>
  
  
        <div class="drop-down-menu-container" role="menu">
          <nav id="product-navigation" class="product-navigation drop-down-menu">
            <ul class="drop-down-menu-section products-list">
              <li><a href="https://www.npmjs.com/npm/on-site">npm On-Site</a></li>
              <li><a href="https://www.npmjs.com/npm/private-packages" data-event-trigger="click" data-event-name="private-modules-nav-link">npm Private Packages</a></li>
              <li><a href="https://www.npmjs.com/npm/open-source">npm Open Source</a></li>
              <li><a href="https://docs.npmjs.com/">documentation</a></li>
              <li><a href="https://www.npmjs.com/support">support</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <!-- /menu 2 -->
  
  
  
  </header>


    <div class="container content">
      
<div class="content-column">

  <h1 class="package-name">
    <a href="https://www.npmjs.com/package/mysql" class="active">mysql</a>
      <i class="icon-public"></i>
  </h1>
  <p class="package-description">A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.</p>

  <form class="star">
    <input type="hidden" name="name" value="mysql">
    <input id="star-input" type="checkbox" name="isStarred" value="true">
    <label for="star-input" class="icon-star"></label>
      <input type="hidden" name="crumb" value="FOvXka-lUBL_fObPFHF7MPmDYIHoITrQoMmU1iJqZoV">
  </form>

  <div id="readme" class="markdown">
      <h1 id="user-content-mysql" class="deep-link package-name-redundant"><a href="https://www.npmjs.com/package/mysql#mysql">mysql</a></h1>
<p><a href="https://npmjs.org/package/mysql"><img src="./96_mysql_nodejs_files/mysql.svg" class="badge"></a>
<a href="https://npmjs.org/package/mysql"><img src="./96_mysql_nodejs_files/mysql(1).svg" class="badge"></a>
<a href="http://nodejs.org/download/"><img src="./96_mysql_nodejs_files/mysql(2).svg" class="badge"></a>
<a href="https://travis-ci.org/felixge/node-mysql"><img src="./96_mysql_nodejs_files/master.svg" class="badge"></a>
<a href="https://ci.appveyor.com/project/dougwilson/node-mysql"><img src="./96_mysql_nodejs_files/master(1).svg" class="badge"></a>
<a href="https://coveralls.io/r/felixge/node-mysql?branch=master"><img src="./96_mysql_nodejs_files/master(2).svg" class="badge"></a></p>
<h2 id="user-content-table-of-contents" class="deep-link"><a href="https://www.npmjs.com/package/mysql#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="https://www.npmjs.com/package/mysql#install">Install</a></li>
<li><a href="https://www.npmjs.com/package/mysql#introduction">Introduction</a></li>
<li><a href="https://www.npmjs.com/package/mysql#contributors">Contributors</a></li>
<li><a href="https://www.npmjs.com/package/mysql#sponsors">Sponsors</a></li>
<li><a href="https://www.npmjs.com/package/mysql#community">Community</a></li>
<li><a href="https://www.npmjs.com/package/mysql#establishing-connections">Establishing connections</a></li>
<li><a href="https://www.npmjs.com/package/mysql#connection-options">Connection options</a></li>
<li><a href="https://www.npmjs.com/package/mysql#ssl-options">SSL options</a></li>
<li><a href="https://www.npmjs.com/package/mysql#terminating-connections">Terminating connections</a></li>
<li><a href="https://www.npmjs.com/package/mysql#pooling-connections">Pooling connections</a></li>
<li><a href="https://www.npmjs.com/package/mysql#pool-options">Pool options</a></li>
<li><a href="https://www.npmjs.com/package/mysql#pool-events">Pool events</a></li>
<li><a href="https://www.npmjs.com/package/mysql#closing-all-the-connections-in-a-pool">Closing all the connections in a pool</a></li>
<li><a href="https://www.npmjs.com/package/mysql#poolcluster">PoolCluster</a></li>
<li><a href="https://www.npmjs.com/package/mysql#poolcluster-option">PoolCluster Option</a></li>
<li><a href="https://www.npmjs.com/package/mysql#switching-users-and-altering-connection-state">Switching users and altering connection state</a></li>
<li><a href="https://www.npmjs.com/package/mysql#server-disconnects">Server disconnects</a></li>
<li><a href="https://www.npmjs.com/package/mysql#performing-queries">Performing queries</a></li>
<li><a href="https://www.npmjs.com/package/mysql#escaping-query-values">Escaping query values</a></li>
<li><a href="https://www.npmjs.com/package/mysql#escaping-query-identifiers">Escaping query identifiers</a></li>
<li><a href="https://www.npmjs.com/package/mysql#preparing-queries">Preparing Queries</a></li>
<li><a href="https://www.npmjs.com/package/mysql#custom-format">Custom format</a></li>
<li><a href="https://www.npmjs.com/package/mysql#getting-the-id-of-an-inserted-row">Getting the id of an inserted row</a></li>
<li><a href="https://www.npmjs.com/package/mysql#getting-the-number-of-affected-rows">Getting the number of affected rows</a></li>
<li><a href="https://www.npmjs.com/package/mysql#getting-the-number-of-changed-rows">Getting the number of changed rows</a></li>
<li><a href="https://www.npmjs.com/package/mysql#getting-the-connection-id">Getting the connection ID</a></li>
<li><a href="https://www.npmjs.com/package/mysql#executing-queries-in-parallel">Executing queries in parallel</a></li>
<li><a href="https://www.npmjs.com/package/mysql#streaming-query-rows">Streaming query rows</a></li>
<li><a href="https://www.npmjs.com/package/mysql#piping-results-with-streams2">Piping results with Streams2</a></li>
<li><a href="https://www.npmjs.com/package/mysql#multiple-statement-queries">Multiple statement queries</a></li>
<li><a href="https://www.npmjs.com/package/mysql#stored-procedures">Stored procedures</a></li>
<li><a href="https://www.npmjs.com/package/mysql#joins-with-overlapping-column-names">Joins with overlapping column names</a></li>
<li><a href="https://www.npmjs.com/package/mysql#transactions">Transactions</a></li>
<li><a href="https://www.npmjs.com/package/mysql#timeouts">Timeouts</a></li>
<li><a href="https://www.npmjs.com/package/mysql#error-handling">Error handling</a></li>
<li><a href="https://www.npmjs.com/package/mysql#exception-safety">Exception Safety</a></li>
<li><a href="https://www.npmjs.com/package/mysql#type-casting">Type casting</a></li>
<li><a href="https://www.npmjs.com/package/mysql#connection-flags">Connection Flags</a></li>
<li><a href="https://www.npmjs.com/package/mysql#debugging-and-reporting-problems">Debugging and reporting problems</a></li>
<li><a href="https://www.npmjs.com/package/mysql#running-tests">Running tests</a></li>
<li><a href="https://www.npmjs.com/package/mysql#todo">Todo</a></li>
</ul>
<h2 id="user-content-install" class="deep-link"><a href="https://www.npmjs.com/package/mysql#install">Install</a></h2>
<pre><code class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span>$&nbsp;npm&nbsp;install&nbsp;mysql</span></span></div></pre></code></pre>
<p>For information about the previous 0.9.x releases, visit the <a href="https://github.com/felixge/node-mysql/tree/v0.9">v0.9 branch</a>.</p>
<p>Sometimes I may also ask you to install the latest version from Github to check
if a bugfix is working. In this case, please do:</p>
<pre><code class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span>$&nbsp;npm&nbsp;install&nbsp;felixge/node-mysql</span></span></div></pre></code></pre>
<h2 id="user-content-introduction" class="deep-link"><a href="https://www.npmjs.com/package/mysql#introduction">Introduction</a></h2>
<p>This is a node.js driver for mysql. It is written in JavaScript, does not
require compiling, and is 100% MIT licensed.</p>
<p>Here is an example on how to use it:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>localhost</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>me</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;password&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>secret</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;database&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>my_db</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>connect</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1&nbsp;+&nbsp;1&nbsp;AS&nbsp;solution</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span>,&nbsp;</span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>The&nbsp;solution&nbsp;is:&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rows</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span>solution</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>end</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>From this example, you can learn the following:</p>
<ul>
<li>Every method you invoke on a connection is queued and executed in sequence.</li>
<li>Closing the connection is done using <code>end()</code> which makes sure all remaining
queries are executed before sending a quit packet to the mysql server.</li>
</ul>
<h2 id="user-content-contributors" class="deep-link"><a href="https://www.npmjs.com/package/mysql#contributors">Contributors</a></h2>
<p>Thanks goes to the people who have contributed code to this module, see the
<a href="https://github.com/felixge/node-mysql/graphs/contributors">GitHub Contributors page</a>.</p>
<p>Additionally I'd like to thank the following people:</p>
<ul>
<li><a href="http://andrey.hristov.com/">Andrey Hristov</a> (Oracle) - for helping me with protocol questions.</li>
<li><a href="http://blog.ulf-wendel.de/">Ulf Wendel</a> (Oracle) - for helping me with protocol questions.</li>
</ul>
<h2 id="user-content-sponsors" class="deep-link"><a href="https://www.npmjs.com/package/mysql#sponsors">Sponsors</a></h2>
<p>The following companies have supported this project financially, allowing me to
spend more time on it (ordered by time of contribution):</p>
<ul>
<li><a href="http://transloadit.com/">Transloadit</a> (my startup, we do file uploading &amp;
video encoding as a service, check it out)</li>
<li><a href="http://www.joyent.com/">Joyent</a></li>
<li><a href="http://pinkbike.com/">pinkbike.com</a></li>
<li><a href="http://www.holidayextras.co.uk/">Holiday Extras</a> (they are <a href="http://join.holidayextras.co.uk/">hiring</a>)</li>
<li><a href="http://newscope.com/">Newscope</a> (they are <a href="http://www.newscope.com/stellenangebote">hiring</a>)</li>
</ul>
<p>If you are interested in sponsoring a day or more of my time, please
<a href="http://felixge.de/#consulting">get in touch</a>.</p>
<h2 id="user-content-community" class="deep-link"><a href="https://www.npmjs.com/package/mysql#community">Community</a></h2>
<p>If you'd like to discuss this module, or ask questions about it, please use one
of the following:</p>
<ul>
<li><strong>Mailing list</strong>: <a href="https://groups.google.com/forum/#!forum/node-mysql">https://groups.google.com/forum/#!forum/node-mysql</a></li>
<li><strong>IRC Channel</strong>: #node.js (on <a href="http://freenode.net/">freenode.net</a>, I pay attention to any message
including the term <code>mysql</code>)</li>
</ul>
<h2 id="user-content-establishing-connections" class="deep-link"><a href="https://www.npmjs.com/package/mysql#establishing-connections">Establishing connections</a></h2>
<p>The recommended way to establish a connection is this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>example.org</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>bob</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;password&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>secret</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>connect</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.error</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>error&nbsp;connecting:&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;err</span><span class="meta delimiter method period js"><span>.</span></span><span>stack</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>connected&nbsp;as&nbsp;id&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>threadId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>However, a connection can also be implicitly established by invoking a query:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta delimiter method period js"><span>.</span><span>.</span><span>.</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;connected!&nbsp;(unless&nbsp;`err`&nbsp;is&nbsp;set)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Depending on how you like to handle your errors, either method may be
appropriate. Any type of connection error (handshake or network) is considered
a fatal error, see the <a href="https://www.npmjs.com/package/mysql#error-handling">Error Handling</a> section for more
information.</p>
<h2 id="user-content-connection-options" class="deep-link"><a href="https://www.npmjs.com/package/mysql#connection-options">Connection options</a></h2>
<p>When establishing a connection, you can set the following options:</p>
<ul>
<li><code>host</code>: The hostname of the database you are connecting to. (Default:
<code>localhost</code>)</li>
<li><code>port</code>: The port number to connect to. (Default: <code>3306</code>)</li>
<li><code>localAddress</code>: The source IP address to use for TCP connection. (Optional)</li>
<li><code>socketPath</code>: The path to a unix domain socket to connect to. When used <code>host</code>
and <code>port</code> are ignored.</li>
<li><code>user</code>: The MySQL user to authenticate as.</li>
<li><code>password</code>: The password of that MySQL user.</li>
<li><code>database</code>: Name of the database to use for this connection (Optional).</li>
<li><code>charset</code>: The charset for the connection. This is called "collation" in the SQL-level
of MySQL (like <code>utf8_general_ci</code>). If a SQL-level charset is specified (like <code>utf8mb4</code>)
then the default collation for that charset is used. (Default: <code>'UTF8_GENERAL_CI'</code>)</li>
<li><code>timezone</code>: The timezone used to store local dates. (Default: <code>'local'</code>)</li>
<li><code>connectTimeout</code>: The milliseconds before a timeout occurs during the initial connection
to the MySQL server. (Default: <code>10000</code>)</li>
<li><code>stringifyObjects</code>: Stringify objects instead of converting to values. See
issue <a href="https://github.com/felixge/node-mysql/issues/501">#501</a>. (Default: <code>'false'</code>)</li>
<li><code>insecureAuth</code>: Allow connecting to MySQL instances that ask for the old
(insecure) authentication method. (Default: <code>false</code>)</li>
<li><code>typeCast</code>: Determines if column values should be converted to native
JavaScript types. (Default: <code>true</code>)</li>
<li><code>queryFormat</code>: A custom query format function. See <a href="https://www.npmjs.com/package/mysql#custom-format">Custom format</a>.</li>
<li><code>supportBigNumbers</code>: When dealing with big numbers (BIGINT and DECIMAL columns) in the database,
you should enable this option (Default: <code>false</code>).</li>
<li><code>bigNumberStrings</code>: Enabling both <code>supportBigNumbers</code> and <code>bigNumberStrings</code> forces big numbers
(BIGINT and DECIMAL columns) to be always returned as JavaScript String objects (Default: <code>false</code>).
Enabling <code>supportBigNumbers</code> but leaving <code>bigNumberStrings</code> disabled will return big numbers as String
objects only when they cannot be accurately represented with [JavaScript Number objects] (<a href="http://ecma262-5.com/ELS5_HTML.htm#Section_8.5">http://ecma262-5.com/ELS5_HTML.htm#Section_8.5</a>)
(which happens when they exceed the [-2^53, +2^53] range), otherwise they will be returned as
Number objects. This option is ignored if <code>supportBigNumbers</code> is disabled.</li>
<li><code>dateStrings</code>: Force date types (TIMESTAMP, DATETIME, DATE) to be returned as strings rather then
inflated into JavaScript Date objects. (Default: <code>false</code>)</li>
<li><code>debug</code>: Prints protocol details to stdout. (Default: <code>false</code>)</li>
<li><code>trace</code>: Generates stack traces on <code>Error</code> to include call site of library
entrance ("long stack traces"). Slight performance penalty for most calls.
(Default: <code>true</code>)</li>
<li><code>multipleStatements</code>: Allow multiple mysql statements per query. Be careful
with this, it could increase the scope of SQL injection attacks. (Default: <code>false</code>)</li>
<li><code>flags</code>: List of connection flags to use other than the default ones. It is
also possible to blacklist default ones. For more information, check
<a href="https://www.npmjs.com/package/mysql#connection-flags">Connection Flags</a>.</li>
<li><code>ssl</code>: object with ssl parameters or a string containing name of ssl profile. See <a href="https://www.npmjs.com/package/mysql#ssl-options">SSL options</a>.</li>
</ul>
<p>In addition to passing these options as an object, you can also use a url
string. For example:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql://user:pass@host/db?debug=true&amp;charset=BIG5_CHINESE_CI&amp;timezone=-0700</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Note: The query values are first attempted to be parsed as JSON, and if that
fails assumed to be plaintext strings.</p>
<h3 id="user-content-ssl-options" class="deep-link"><a href="https://www.npmjs.com/package/mysql#ssl-options">SSL options</a></h3>
<p>The <code>ssl</code> option in the connection options takes a string or an object. When given a string,
it uses one of the predefined SSL profiles included. The following profiles are included:</p>
<ul>
<li><code>"Amazon RDS"</code>: this profile is for connecting to an Amazon RDS server and contains the
certificates from <a href="https://rds.amazonaws.com/doc/rds-ssl-ca-cert.pem">https://rds.amazonaws.com/doc/rds-ssl-ca-cert.pem</a> and
<a href="https://s3.amazonaws.com/rds-downloads/rds-combined-ca-bundle.pem">https://s3.amazonaws.com/rds-downloads/rds-combined-ca-bundle.pem</a></li>
</ul>
<p>When connecting to other servers, you will need to provide an object of options, in the
same format as <a href="http://nodejs.org/api/crypto.html#crypto_crypto_createcredentials_details">crypto.createCredentials</a>.
Please note the arguments expect a string of the certificate, not a file name to the
certificate. Here is a simple example:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;host&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>localhost</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;ssl&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;ca&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>readFileSync</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/mysql-ca.crt</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>You can also connect to a MySQL server without properly providing the appropriate
CA to trust. <em>You should not do this</em>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;host&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>localhost</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;ssl&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;DO&nbsp;NOT&nbsp;DO&nbsp;THIS</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;up&nbsp;your&nbsp;ca&nbsp;correctly&nbsp;to&nbsp;trust&nbsp;the&nbsp;connection</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;rejectUnauthorized</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-terminating-connections" class="deep-link"><a href="https://www.npmjs.com/package/mysql#terminating-connections">Terminating connections</a></h2>
<p>There are two ways to end a connection. Terminating a connection gracefully is
done by calling the <code>end()</code> method:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>end</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;The&nbsp;connection&nbsp;is&nbsp;terminated&nbsp;now</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>This will make sure all previously enqueued queries are still before sending a
<code>COM_QUIT</code> packet to the MySQL server. If a fatal error occurs before the
<code>COM_QUIT</code> packet can be sent, an <code>err</code> argument will be provided to the
callback, but the connection will be terminated regardless of that.</p>
<p>An alternative way to end the connection is to call the <code>destroy()</code> method.
This will cause an immediate termination of the underlying socket.
Additionally <code>destroy()</code> guarantees that no more events or callbacks will be
triggered for the connection.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>destroy</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Unlike <code>end()</code> the <code>destroy()</code> method does not take a callback argument.</p>
<h2 id="user-content-pooling-connections" class="deep-link"><a href="https://www.npmjs.com/package/mysql#pooling-connections">Pooling connections</a></h2>
<p>Use pool directly.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;mysql&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;pool&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createPool</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;connectionLimit&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>10</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>example.org</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>bob</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;password&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>secret</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1&nbsp;+&nbsp;1&nbsp;AS&nbsp;solution</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span>,&nbsp;</span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>The&nbsp;solution&nbsp;is:&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rows</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span>solution</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Connections can be pooled to ease sharing a single connection, or managing
multiple connections.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;mysql&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;pool&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createPool</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>example.org</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>bob</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;password&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>secret</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;connected!&nbsp;(unless&nbsp;`err`&nbsp;is&nbsp;set)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>When you are done with a connection, just call <code>connection.release()</code> and the
connection will return to the pool, ready to be used again by someone else.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;mysql&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;pool&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createPool</span><span class="meta brace round js"><span>(</span></span><span class="meta delimiter method period js"><span>.</span><span>.</span><span>.</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Use&nbsp;the&nbsp;connection</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;something&nbsp;FROM&nbsp;sometable</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;And&nbsp;done&nbsp;with&nbsp;the&nbsp;connection.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>release</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Don't&nbsp;use&nbsp;the&nbsp;connection&nbsp;here,&nbsp;it&nbsp;has&nbsp;been&nbsp;returned&nbsp;to&nbsp;the&nbsp;pool.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>If you would like to close the connection and remove it from the pool, use
<code>connection.destroy()</code> instead. The pool will create a new connection the next
time one is needed.</p>
<p>Connections are lazily created by the pool. If you configure the pool to allow
up to 100 connections, but only ever use 5 simultaneously, only 5 connections
will be made. Connections are also cycled round-robin style, with connections
being taken from the top of the pool and returning to the bottom.</p>
<p>When a previous connection is retrieved from the pool, a ping packet is sent
to the server to check if the connection is still good.</p>
<h2 id="user-content-pool-options" class="deep-link"><a href="https://www.npmjs.com/package/mysql#pool-options">Pool options</a></h2>
<p>Pools accept all the same options as a connection. When creating a new
connection, the options are simply passed to the connection constructor. In
addition to those options pools accept a few extras:</p>
<ul>
<li><code>acquireTimeout</code>: The milliseconds before a timeout occurs during the connection
acquisition. This is slightly different from <code>connectTimeout</code>, because acquiring
a pool connection does not always involve making a connection. (Default: <code>10000</code>)</li>
<li><code>waitForConnections</code>: Determines the pool's action when no connections are
available and the limit has been reached. If <code>true</code>, the pool will queue the
connection request and call it when one becomes available. If <code>false</code>, the
pool will immediately call back with an error. (Default: <code>true</code>)</li>
<li><code>connectionLimit</code>: The maximum number of connections to create at once.
(Default: <code>10</code>)</li>
<li><code>queueLimit</code>: The maximum number of connection requests the pool will queue
before returning an error from <code>getConnection</code>. If set to <code>0</code>, there is no
limit to the number of queued connection requests. (Default: <code>0</code>)</li>
</ul>
<h2 id="user-content-pool-events" class="deep-link"><a href="https://www.npmjs.com/package/mysql#pool-events">Pool events</a></h2>
<h3 id="user-content-connection" class="deep-link"><a href="https://www.npmjs.com/package/mysql#connection">connection</a></h3>
<p>The pool will emit a <code>connection</code> event when a new connection is made within the pool.
If you need to set session variables on the connection before it gets used, you can
listen to the <code>connection</code> event.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>connection</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SET&nbsp;SESSION&nbsp;auto_increment_increment=1</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h3 id="user-content-enqueue" class="deep-link"><a href="https://www.npmjs.com/package/mysql#enqueue">enqueue</a></h3>
<p>The pool will emit an <code>enqueue</code> event when a callback has been queued to wait for
an available connection.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>enqueue</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>Waiting&nbsp;for&nbsp;available&nbsp;connection&nbsp;slot</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-closing-all-the-connections-in-a-pool" class="deep-link"><a href="https://www.npmjs.com/package/mysql#closing-all-the-connections-in-a-pool">Closing all the connections in a pool</a></h2>
<p>When you are done using the pool, you have to end all the connections or the
Node.js event loop will stay active until the connections are closed by the
MySQL server. This is typically done if the pool is used in a script or when
trying to gracefully shutdown a server. To end all the connections in the
pool, use the <code>end</code> method on the pool:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>end</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;all&nbsp;connections&nbsp;in&nbsp;the&nbsp;pool&nbsp;have&nbsp;ended</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>The <code>end</code> method takes an <em>optional</em> callback that you can use to know once
all the connections have ended. The connections end <em>gracefully</em>, so all
pending queries will still complete and the time to end the pool will vary.</p>
<p><strong>Once <code>pool.end()</code> has been called, <code>pool.getConnection</code> and other operations
can no longer be performed</strong></p>
<h2 id="user-content-poolcluster" class="deep-link"><a href="https://www.npmjs.com/package/mysql#poolcluster">PoolCluster</a></h2>
<p>PoolCluster provides multiple hosts connection. (group &amp; retry &amp; selector)</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;create</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;poolCluster&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createPoolCluster</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;add&nbsp;configurations</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span>config</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;anonymous&nbsp;group</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>MASTER</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;masterConfig</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SLAVE1</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;slave1Config</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SLAVE2</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;slave2Config</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;remove&nbsp;configurations</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>remove</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SLAVE2</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;By&nbsp;nodeId</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>remove</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SLAVE*</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;By&nbsp;target&nbsp;group&nbsp;:&nbsp;SLAVE1-2</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Target&nbsp;Group&nbsp;:&nbsp;ALL(anonymous,&nbsp;MASTER,&nbsp;SLAVE1-2),&nbsp;Selector&nbsp;:&nbsp;round-robin(default)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Target&nbsp;Group&nbsp;:&nbsp;MASTER,&nbsp;Selector&nbsp;:&nbsp;round-robin</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>MASTER</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Target&nbsp;Group&nbsp;:&nbsp;SLAVE1-2,&nbsp;Selector&nbsp;:&nbsp;order</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;If&nbsp;can't&nbsp;connect&nbsp;to&nbsp;SLAVE1,&nbsp;return&nbsp;SLAVE2.&nbsp;(remove&nbsp;SLAVE1&nbsp;in&nbsp;the&nbsp;cluster)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>remove</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>nodeId</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>REMOVED&nbsp;NODE&nbsp;:&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;nodeId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;nodeId&nbsp;=&nbsp;SLAVE1&nbsp;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SLAVE*</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>ORDER</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;of&nbsp;namespace&nbsp;:&nbsp;of(pattern,&nbsp;selector)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>of</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>*</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;pool&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>of</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SLAVE*</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>RANDOM</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>pool</span><span class="meta delimiter method period js"><span>.</span></span><span>getConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>connection</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;close&nbsp;all&nbsp;connections</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>poolCluster</span><span class="meta delimiter method period js"><span>.</span></span><span>end</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;all&nbsp;connections&nbsp;in&nbsp;the&nbsp;pool&nbsp;cluster&nbsp;have&nbsp;ended</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-poolcluster-option" class="deep-link"><a href="https://www.npmjs.com/package/mysql#poolcluster-option">PoolCluster Option</a></h2>
<ul>
<li><code>canRetry</code>: If <code>true</code>, <code>PoolCluster</code> will attempt to reconnect when connection fails. (Default: <code>true</code>)</li>
<li><code>removeNodeErrorCount</code>: If connection fails, node's <code>errorCount</code> increases.
When <code>errorCount</code> is greater than <code>removeNodeErrorCount</code>, remove a node in the <code>PoolCluster</code>. (Default: <code>5</code>)</li>
<li><code>restoreNodeTimeout</code>: If connection fails, specifies the number of milliseconds
before another connection attempt will be made. If set to <code>0</code>, then node will be
removed instead and never re-used. (Default: <code>0</code>)</li>
<li><code>defaultSelector</code>: The default selector. (Default: <code>RR</code>)
<ul>
<li><code>RR</code>: Select one alternately. (Round-Robin)</li>
<li><code>RANDOM</code>: Select the node by random function.</li>
<li><code>ORDER</code>: Select the first node available unconditionally.</li>
</ul>
</li>
</ul>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;clusterConfig&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;removeNodeErrorCount</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Remove&nbsp;the&nbsp;node&nbsp;immediately&nbsp;when&nbsp;connection&nbsp;fails.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;defaultSelector</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>ORDER</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;poolCluster&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createPoolCluster</span><span class="meta brace round js"><span>(</span></span><span>clusterConfig</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-switching-users-and-altering-connection-state" class="deep-link"><a href="https://www.npmjs.com/package/mysql#switching-users-and-altering-connection-state">Switching users and altering connection state</a></h2>
<p>MySQL offers a changeUser command that allows you to alter the current user and
other aspects of the connection without shutting down the underlying socket:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>changeUser</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>user&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>john</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>The available options for this feature are:</p>
<ul>
<li><code>user</code>: The name of the new user (defaults to the previous one).</li>
<li><code>password</code>: The password of the new user (defaults to the previous one).</li>
<li><code>charset</code>: The new charset (defaults to the previous one).</li>
<li><code>database</code>: The new database (defaults to the previous one).</li>
</ul>
<p>A sometimes useful side effect of this functionality is that this function also
resets any connection state (variables, transactions, etc.).</p>
<p>Errors encountered during this operation are treated as fatal connection errors
by this module.</p>
<h2 id="user-content-server-disconnects" class="deep-link"><a href="https://www.npmjs.com/package/mysql#server-disconnects">Server disconnects</a></h2>
<p>You may lose the connection to a MySQL server due to network problems, the
server timing you out, the server being restarted, or crashing. All of these
events are considered fatal errors, and will have the <code>err.code = 'PROTOCOL_CONNECTION_LOST'</code>.  See the <a href="https://www.npmjs.com/package/mysql#error-handling">Error Handling</a> section
for more information.</p>
<p>Re-connecting a connection is done by establishing a new connection. Once
terminated, an existing connection object cannot be re-connected by design.</p>
<p>With Pool, disconnected connections will be removed from the pool freeing up
space for a new connection to be created on the next getConnection call.</p>
<h2 id="user-content-performing-queries" class="deep-link"><a href="https://www.npmjs.com/package/mysql#performing-queries">Performing queries</a></h2>
<p>The most basic way to perform a query is to call the <code>.query()</code> method on an object
(like a <code>Connection</code> or <code>Pool</code> instance).</p>
<p>The simplest form of .<code>query()</code> is <code>.query(sqlString, callback)</code>, where a SQL string
is the first argument and the second is a callback:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;`books`&nbsp;WHERE&nbsp;`author`&nbsp;=&nbsp;"David"</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span>,&nbsp;</span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;error&nbsp;will&nbsp;be&nbsp;an&nbsp;Error&nbsp;if&nbsp;one&nbsp;occurred&nbsp;during&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;results&nbsp;will&nbsp;contain&nbsp;the&nbsp;results&nbsp;of&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;fields&nbsp;will&nbsp;contain&nbsp;information&nbsp;about&nbsp;the&nbsp;returned&nbsp;results&nbsp;fields&nbsp;(if&nbsp;any)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>The second form <code>.query(sqlString, values, callback)</code> comes when using
placeholder values (see <a href="https://www.npmjs.com/package/mysql#escaping-query-values">escaping query values</a>):</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;`books`&nbsp;WHERE&nbsp;`author`&nbsp;=&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>David</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span>,&nbsp;</span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;error&nbsp;will&nbsp;be&nbsp;an&nbsp;Error&nbsp;if&nbsp;one&nbsp;occurred&nbsp;during&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;results&nbsp;will&nbsp;contain&nbsp;the&nbsp;results&nbsp;of&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;fields&nbsp;will&nbsp;contain&nbsp;information&nbsp;about&nbsp;the&nbsp;returned&nbsp;results&nbsp;fields&nbsp;(if&nbsp;any)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>The third form <code>.query(options, callback)</code> comes when using various advanced
options on the query, like <a href="https://www.npmjs.com/package/mysql#escaping-query-values">escaping query values</a>,
<a href="https://www.npmjs.com/package/mysql#joins-with-overlapping-column-names">joins with overlapping column names</a>,
<a href="https://www.npmjs.com/package/mysql#timeout">timeouts</a>, and <a href="https://www.npmjs.com/package/mysql#type-casting">type casting</a>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;`books`&nbsp;WHERE&nbsp;`author`&nbsp;=&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;timeout</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>40000</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;40s</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;values</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>David</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span>,&nbsp;</span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;error&nbsp;will&nbsp;be&nbsp;an&nbsp;Error&nbsp;if&nbsp;one&nbsp;occurred&nbsp;during&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;results&nbsp;will&nbsp;contain&nbsp;the&nbsp;results&nbsp;of&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;fields&nbsp;will&nbsp;contain&nbsp;information&nbsp;about&nbsp;the&nbsp;returned&nbsp;results&nbsp;fields&nbsp;(if&nbsp;any)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Note that a combination of the second and third forms can be used where the
placeholder values are passes as an argument and not in the options object.
The <code>values</code> argument will override the <code>values</code> in the option object.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;`books`&nbsp;WHERE&nbsp;`author`&nbsp;=&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;timeout</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>40000</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;40s</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>David</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span>,&nbsp;</span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;error&nbsp;will&nbsp;be&nbsp;an&nbsp;Error&nbsp;if&nbsp;one&nbsp;occurred&nbsp;during&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;results&nbsp;will&nbsp;contain&nbsp;the&nbsp;results&nbsp;of&nbsp;the&nbsp;query</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;fields&nbsp;will&nbsp;contain&nbsp;information&nbsp;about&nbsp;the&nbsp;returned&nbsp;results&nbsp;fields&nbsp;(if&nbsp;any)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-escaping-query-values" class="deep-link"><a href="https://www.npmjs.com/package/mysql#escaping-query-values">Escaping query values</a></h2>
<p>In order to avoid SQL Injection attacks, you should always escape any user
provided data before using it inside a SQL query. You can do so using the
<code>mysql.escape()</code>, <code>connection.escape()</code> or <code>pool.escape()</code> methods:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;userId&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>some&nbsp;user&nbsp;provided&nbsp;value</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;sql&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;users&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>escape</span></span><span class="meta brace round js"><span>(</span></span><span>userId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>sql</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Alternatively, you can use <code>?</code> characters as placeholders for values you would
like to have escaped like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;users&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>userId</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>This looks similar to prepared statements in MySQL, however it really just uses
the same <code>connection.escape()</code> method internally.</p>
<p><strong>Caution</strong> This also differs from prepared statements in that all <code>?</code> are
replaced, even those contained in comments and strings.</p>
<p>Different value types are escaped differently, here is how:</p>
<ul>
<li>Numbers are left untouched</li>
<li>Booleans are converted to <code>true</code> / <code>false</code></li>
<li>Date objects are converted to <code>'YYYY-mm-dd HH:ii:ss'</code> strings</li>
<li>Buffers are converted to hex strings, e.g. <code>X'0fa5'</code></li>
<li>Strings are safely escaped</li>
<li>Arrays are turned into list, e.g. <code>['a', 'b']</code> turns into <code>'a', 'b'</code></li>
<li>Nested arrays are turned into grouped lists (for bulk inserts), e.g. <code>[['a', 'b'], ['c', 'd']]</code> turns into <code>('a', 'b'), ('c', 'd')</code></li>
<li>Objects are turned into <code>key = 'val'</code> pairs for each enumerable property on
the object. If the property's value is a function, it is skipped; if the
property's value is an object, toString() is called on it and the returned
value is used.</li>
<li><code>undefined</code> / <code>null</code> are converted to <code>NULL</code></li>
<li><code>NaN</code> / <code>Infinity</code> are left as-is. MySQL does not support these, and trying
to insert them as values will trigger MySQL errors until they implement
support.</li>
</ul>
<p>If you paid attention, you may have noticed that this escaping allows you
to do neat things like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;post&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>id</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;title</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>Hello&nbsp;MySQL</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;query&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>INSERT&nbsp;INTO&nbsp;posts&nbsp;SET&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;post</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>result</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Neat!</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>query</span><span class="meta delimiter method period js"><span>.</span></span><span>sql</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;INSERT&nbsp;INTO&nbsp;posts&nbsp;SET&nbsp;`id`&nbsp;=&nbsp;1,&nbsp;`title`&nbsp;=&nbsp;'Hello&nbsp;MySQL'</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div></pre></code></pre>
<p>If you feel the need to escape queries by yourself, you can also use the escaping
function directly:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;query&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>"</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;posts&nbsp;WHERE&nbsp;title=</span><span class="punctuation definition string end js"><span>"</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>escape</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>"</span></span><span>Hello&nbsp;MySQL</span><span class="punctuation definition string end js"><span>"</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>query</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;posts&nbsp;WHERE&nbsp;title='Hello&nbsp;MySQL'</span><span>&nbsp;</span></span></span></div></pre></code></pre>
<h2 id="user-content-escaping-query-identifiers" class="deep-link"><a href="https://www.npmjs.com/package/mysql#escaping-query-identifiers">Escaping query identifiers</a></h2>
<p>If you can't trust an SQL identifier (database / table / column name) because it is
provided by a user, you should escape it with <code>mysql.escapeId(identifier)</code>,
<code>connection.escapeId(identifier)</code> or <code>pool.escapeId(identifier)</code> like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;sorter&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>date</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;sql&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;posts&nbsp;ORDER&nbsp;BY&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>escapeId</span><span class="meta brace round js"><span>(</span></span><span>sorter</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>sql</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>It also supports adding qualified identifiers. It will escape both parts.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;sorter&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>date</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;sql&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;posts&nbsp;ORDER&nbsp;BY&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>escapeId</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>posts.</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;sorter</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>sql</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Alternatively, you can use <code>??</code> characters as placeholders for identifiers you would
like to have escaped like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;userId&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric js"><span>1</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;columns&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>username</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>email</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;query&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;??&nbsp;FROM&nbsp;??&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>columns</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>users</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;userId</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>query</span><span class="meta delimiter method period js"><span>.</span></span><span>sql</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;SELECT&nbsp;`username`,&nbsp;`email`&nbsp;FROM&nbsp;`users`&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;1</span><span>&nbsp;</span></span></span></div></pre></code></pre>
<p><strong>Please note that this last character sequence is experimental and syntax might change</strong></p>
<p>When you pass an Object to <code>.escape()</code> or <code>.query()</code>, <code>.escapeId()</code> is used to avoid SQL injection in object keys.</p>
<h3 id="user-content-preparing-queries" class="deep-link"><a href="https://www.npmjs.com/package/mysql#preparing-queries">Preparing Queries</a></h3>
<p>You can use mysql.format to prepare a query with multiple insertion points, utilizing the proper escaping for ids and values. A simple example of this follows:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;sql&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>"</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;??&nbsp;WHERE&nbsp;??&nbsp;=&nbsp;?</span><span class="punctuation definition string end js"><span>"</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;inserts&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>users</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>id</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;userId</span><span class="meta brace square js"><span>]</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>sql&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>format</span><span class="meta brace round js"><span>(</span></span><span>sql</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;inserts</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Following this you then have a valid, escaped query that you can then send to the database safely. This is useful if you are looking to prepare the query before actually sending it to the database. As mysql.format is exposed from SqlString.format you also have the option (but are not required) to pass in stringifyObject and timezone, allowing you provide a custom means of turning objects into strings, as well as a location-specific/timezone-aware Date.</p>
<h3 id="user-content-custom-format" class="deep-link"><a href="https://www.npmjs.com/package/mysql#custom-format">Custom format</a></h3>
<p>If you prefer to have another type of query escape format, there's a connection configuration option you can use to define a custom format function. You can access the connection object if you want to use the built-in <code>.escape()</code> or any other connection function.</p>
<p>Here's an example of how to implement another format:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="support class js"><span>connection.config</span></span><span>.</span><span class="entity name function js"><span>queryFormat</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>query</span></span><span>,&nbsp;</span><span class="variable function js"><span>values</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator js"><span>!</span></span><span>values</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;query</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;query</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>replace</span></span><span class="meta brace round js"><span>(</span></span><span class="string regexp js"><span class="punctuation definition string begin js"><span>/</span></span><span class="constant character regexp"><span>\:</span></span><span class="meta group regexp"><span class="punctuation definition group regexp"><span>(</span></span><span class="constant character regexp"><span>\w</span></span><span class="keyword operator quantifier regexp"><span>+</span></span><span class="punctuation definition group regexp"><span>)</span></span></span><span class="punctuation definition string end js"><span>/</span></span><span>g</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>txt</span></span><span>,&nbsp;</span><span class="variable function js"><span>key</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>values</span><span class="meta delimiter method period js"><span>.</span></span><span>hasOwnProperty</span><span class="meta brace round js"><span>(</span></span><span>key</span><span class="meta brace round js"><span>)</span><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>escape</span></span><span class="meta brace round js"><span>(</span></span><span>values</span><span class="meta brace square js"><span>[</span></span><span>key</span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;txt</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter method period js"><span>.</span></span><span>bind</span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>"</span></span><span>UPDATE&nbsp;posts&nbsp;SET&nbsp;title&nbsp;=&nbsp;:title</span><span class="punctuation definition string end js"><span>"</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;title</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>"</span></span><span>Hello&nbsp;MySQL</span><span class="punctuation definition string end js"><span>"</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-getting-the-id-of-an-inserted-row" class="deep-link"><a href="https://www.npmjs.com/package/mysql#getting-the-id-of-an-inserted-row">Getting the id of an inserted row</a></h2>
<p>If you are inserting a row into a table with an auto increment primary key, you
can retrieve the insert id like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>INSERT&nbsp;INTO&nbsp;posts&nbsp;SET&nbsp;?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>title</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>test</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>result</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>result</span><span class="meta delimiter method period js"><span>.</span></span><span>insertId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>When dealing with big numbers (above JavaScript Number precision limit), you should
consider enabling <code>supportBigNumbers</code> option to be able to read the insert id as a
string, otherwise it will throw.</p>
<p>This option is also required when fetching big numbers from the database, otherwise
you will get values rounded to hundreds or thousands due to the precision limit.</p>
<h2 id="user-content-getting-the-number-of-affected-rows" class="deep-link"><a href="https://www.npmjs.com/package/mysql#getting-the-number-of-affected-rows">Getting the number of affected rows</a></h2>
<p>You can get the number of affected rows from an insert, update or delete statement.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>DELETE&nbsp;FROM&nbsp;posts&nbsp;WHERE&nbsp;title&nbsp;=&nbsp;"wrong"</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>result</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>deleted&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;result</span><span class="meta delimiter method period js"><span>.</span></span><span>affectedRows&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&nbsp;rows</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h2 id="user-content-getting-the-number-of-changed-rows" class="deep-link"><a href="https://www.npmjs.com/package/mysql#getting-the-number-of-changed-rows">Getting the number of changed rows</a></h2>
<p>You can get the number of changed rows from an update statement.</p>
<p>"changedRows" differs from "affectedRows" in that it does not count updated rows
whose values were not changed.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>UPDATE&nbsp;posts&nbsp;SET&nbsp;...</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>result</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>changed&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;result</span><span class="meta delimiter method period js"><span>.</span></span><span>changedRows&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&nbsp;rows</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h2 id="user-content-getting-the-connection-id" class="deep-link"><a href="https://www.npmjs.com/package/mysql#getting-the-connection-id">Getting the connection ID</a></h2>
<p>You can get the MySQL connection ID ("thread ID") of a given connection using the <code>threadId</code>
property.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>connect</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>connected&nbsp;as&nbsp;id&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>threadId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-executing-queries-in-parallel" class="deep-link"><a href="https://www.npmjs.com/package/mysql#executing-queries-in-parallel">Executing queries in parallel</a></h2>
<p>The MySQL protocol is sequential, this means that you need multiple connections
to execute queries in parallel. You can use a Pool to manage connections, one
simple approach is to create one connection per incoming http request.</p>
<h2 id="user-content-streaming-query-rows" class="deep-link"><a href="https://www.npmjs.com/package/mysql#streaming-query-rows">Streaming query rows</a></h2>
<p>Sometimes you may want to select large quantities of rows and process each of
them as they are received. This can be done like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;query&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;posts</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>query</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>error</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Handle&nbsp;error,&nbsp;an&nbsp;'end'&nbsp;event&nbsp;will&nbsp;be&nbsp;emitted&nbsp;after&nbsp;this&nbsp;as&nbsp;well</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>fields</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>fields</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;field&nbsp;packets&nbsp;for&nbsp;the&nbsp;rows&nbsp;to&nbsp;follow</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>result</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>row</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Pausing&nbsp;the&nbsp;connnection&nbsp;is&nbsp;useful&nbsp;if&nbsp;your&nbsp;processing&nbsp;involves&nbsp;I/O</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>pause</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;processRow</span><span class="meta brace round js"><span>(</span></span><span>row</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>resume</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>end</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;all&nbsp;rows&nbsp;have&nbsp;been&nbsp;received</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Please note a few things about the example above:</p>
<ul>
<li>Usually you will want to receive a certain amount of rows before starting to
throttle the connection using <code>pause()</code>. This number will depend on the
amount and size of your rows.</li>
<li><code>pause()</code> / <code>resume()</code> operate on the underlying socket and parser. You are
guaranteed that no more <code>'result'</code> events will fire after calling <code>pause()</code>.</li>
<li>You MUST NOT provide a callback to the <code>query()</code> method when streaming rows.</li>
<li>The <code>'result'</code> event will fire for both rows as well as OK packets
confirming the success of a INSERT/UPDATE query.</li>
<li>It is very important not to leave the result paused too long, or you may
encounter <code>Error: Connection lost: The server closed the connection.</code>
The time limit for this is determined by the
<a href="https://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_net_write_timeout">net_write_timeout setting</a>
on your MySQL server.</li>
</ul>
<p>Additionally you may be interested to know that it is currently not possible to
stream individual row columns, they will always be buffered up entirely. If you
have a good use case for streaming large fields to and from MySQL, I'd love to
get your thoughts and contributions on this.</p>
<h3 id="user-content-piping-results-with-streams2" class="deep-link"><a href="https://www.npmjs.com/package/mysql#piping-results-with-streams2">Piping results with Streams2</a></h3>
<p>The query object provides a convenience method <code>.stream([options])</code> that wraps
query events into a <a href="http://nodejs.org/api/stream.html#stream_class_stream_readable">Readable</a>
<a href="http://blog.nodejs.org/2012/12/20/streams2/">Streams2</a> object. This
stream can easily be piped downstream and provides automatic pause/resume,
based on downstream congestion and the optional <code>highWaterMark</code>. The
<code>objectMode</code> parameter of the stream is set to <code>true</code> and cannot be changed
(if you need a byte stream, you will need to use a transform stream, like
<a href="https://www.npmjs.com/package/objstream">objstream</a> for example).</p>
<p>For example, piping query results into another stream (with a max buffer of 5
objects) is simply:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;*&nbsp;FROM&nbsp;posts</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>stream</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>highWaterMark</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>5</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span class="meta delimiter method period js"><span>.</span><span>.</span><span>.</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-multiple-statement-queries" class="deep-link"><a href="https://www.npmjs.com/package/mysql#multiple-statement-queries">Multiple statement queries</a></h2>
<p>Support for multiple statements is disabled for security reasons (it allows for
SQL injection attacks if values are not properly escaped). To use this feature
you have to enable it for your connection:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>multipleStatements</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Once enabled, you can execute multiple statement queries like any other query:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1;&nbsp;SELECT&nbsp;2</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;`results`&nbsp;is&nbsp;an&nbsp;array&nbsp;with&nbsp;one&nbsp;element&nbsp;for&nbsp;every&nbsp;statement&nbsp;in&nbsp;the&nbsp;query:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>results</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;[{1:&nbsp;1}]</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>results</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>1</span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;[{2:&nbsp;2}]</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Additionally you can also stream the results of multiple statement queries:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;query&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1;&nbsp;SELECT&nbsp;2</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>query</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>fields</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>fields</span></span><span>,&nbsp;</span><span class="variable function js"><span>index</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;fields&nbsp;for&nbsp;the&nbsp;result&nbsp;rows&nbsp;that&nbsp;follow</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>result</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>row</span></span><span>,&nbsp;</span><span class="variable function js"><span>index</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;index&nbsp;refers&nbsp;to&nbsp;the&nbsp;statement&nbsp;this&nbsp;result&nbsp;belongs&nbsp;to&nbsp;(starts&nbsp;at&nbsp;0)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>If one of the statements in your query causes an error, the resulting Error
object contains a <code>err.index</code> property which tells you which statement caused
it. MySQL will also stop executing any remaining statements when an error
occurs.</p>
<p>Please note that the interface for streaming multiple statement queries is
experimental and I am looking forward to feedback on it.</p>
<h2 id="user-content-stored-procedures" class="deep-link"><a href="https://www.npmjs.com/package/mysql#stored-procedures">Stored procedures</a></h2>
<p>You can call stored procedures from your queries as with any other mysql driver.
If the stored procedure produces several result sets, they are exposed to you
the same way as the results for multiple statement queries.</p>
<h2 id="user-content-joins-with-overlapping-column-names" class="deep-link"><a href="https://www.npmjs.com/package/mysql#joins-with-overlapping-column-names">Joins with overlapping column names</a></h2>
<p>When executing joins, you are likely to get result sets with overlapping column
names.</p>
<p>By default, node-mysql will overwrite colliding column names in the
order the columns are received from MySQL, causing some of the received values
to be unavailable.</p>
<p>However, you can also specify that you want your columns to be nested below
the table name like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;options&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>...</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;nestTables</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment block js"><span class="punctuation definition comment js"><span>/*</span></span><span>&nbsp;results&nbsp;will&nbsp;be&nbsp;an&nbsp;array&nbsp;like&nbsp;this&nbsp;now:</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;[{</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;table1:&nbsp;{</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fieldA:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fieldB:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;},</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;table2:&nbsp;{</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fieldA:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fieldB:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;},</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;},&nbsp;...]</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;</span><span class="punctuation definition comment js"><span>*/</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Or use a string separator to have your results merged.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;options&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>...</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;nestTables</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>_</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment block js"><span class="punctuation definition comment js"><span>/*</span></span><span>&nbsp;results&nbsp;will&nbsp;be&nbsp;an&nbsp;array&nbsp;like&nbsp;this&nbsp;now:</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;[{</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;table1_fieldA:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;table1_fieldB:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;table2_fieldA:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;&nbsp;&nbsp;table2_fieldB:&nbsp;'...',</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;},&nbsp;...]</span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span>&nbsp;&nbsp;</span><span class="punctuation definition comment js"><span>*/</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-transactions" class="deep-link"><a href="https://www.npmjs.com/package/mysql#transactions">Transactions</a></h2>
<p>Simple transaction support is available at the connection level:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>beginTransaction</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>INSERT&nbsp;INTO&nbsp;posts&nbsp;SET&nbsp;title=?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;title</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>result</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>rollback</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;log&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>Post&nbsp;</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;result</span><span class="meta delimiter method period js"><span>.</span></span><span>insertId&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&nbsp;added</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>INSERT&nbsp;INTO&nbsp;log&nbsp;SET&nbsp;data=?</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;log</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>result</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>rollback</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>commit</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>rollback</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>success!</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Please note that beginTransaction(), commit() and rollback() are simply convenience
functions that execute the START TRANSACTION, COMMIT, and ROLLBACK commands respectively.
It is important to understand that many commands in MySQL can cause an implicit commit,
as described <a href="http://dev.mysql.com/doc/refman/5.5/en/implicit-commit.html">in the MySQL documentation</a></p>
<h2 id="user-content-ping" class="deep-link"><a href="https://www.npmjs.com/package/mysql#ping">Ping</a></h2>
<p>A ping packet can be sent over a connection using the <code>connection.ping</code> method. This
method will send a ping packet to the server and when the server responds, the callback
will fire. If an error occurred, the callback will fire with an error argument.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>ping</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>Server&nbsp;responded&nbsp;to&nbsp;ping</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h2 id="user-content-timeouts" class="deep-link"><a href="https://www.npmjs.com/package/mysql#timeouts">Timeouts</a></h2>
<p>Every operation takes an optional inactivity timeout option. This allows you to
specify appropriate timeouts for operations. It is important to note that these
timeouts are not part of the MySQL protocol, and rather timeout operations through
the client. This means that when a timeout is reached, the connection it occurred
on will be destroyed and no further operations can be performed.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Kill&nbsp;query&nbsp;after&nbsp;60s</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;COUNT(*)&nbsp;AS&nbsp;count&nbsp;FROM&nbsp;big_table</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;timeout</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>60000</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err&nbsp;</span><span class="keyword operator js"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;err</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>code</span></span><span>&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>PROTOCOL_SEQUENCE_TIMEOUT</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Error</span></span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>too&nbsp;long&nbsp;to&nbsp;count&nbsp;table&nbsp;rows!</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>throw</span></span><span>&nbsp;err</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>rows</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span>count&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>&nbsp;rows</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-error-handling" class="deep-link"><a href="https://www.npmjs.com/package/mysql#error-handling">Error handling</a></h2>
<p>This module comes with a consistent approach to error handling that you should
review carefully in order to write solid applications.</p>
<p>All errors created by this module are instances of the JavaScript <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error">Error</a>
object. Additionally they come with two properties:</p>
<ul>
<li><code>err.code</code>: Either a <a href="http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html">MySQL server error</a> (e.g.
<code>'ER_ACCESS_DENIED_ERROR'</code>), a node.js error (e.g. <code>'ECONNREFUSED'</code>) or an
internal error (e.g.  <code>'PROTOCOL_CONNECTION_LOST'</code>).</li>
<li><code>err.fatal</code>: Boolean, indicating if this error is terminal to the connection
object.</li>
</ul>
<p>Fatal errors are propagated to <em>all</em> pending callbacks. In the example below, a
fatal error is triggered by trying to connect to an invalid port. Therefore the
error object is propagated to both pending callbacks:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;port</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>84943</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;WRONG&nbsp;PORT</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>connect</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>code</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;'ECONNREFUSED'</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta delimiter method period js"><span>.</span></span><span>fatal</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;true</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>code</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;'ECONNREFUSED'</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta delimiter method period js"><span>.</span></span><span>fatal</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;true</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Normal errors however are only delegated to the callback they belong to.  So in
the example below, only the first callback receives an error, the second query
works as expected:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>USE&nbsp;name_of_db_that_does_not_exist</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>code</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;'ER_BAD_DB_ERROR'</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>SELECT&nbsp;1</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>rows</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;null</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>rows</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>length</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Last but not least: If a fatal errors occurs and there are no pending
callbacks, or a normal error occurs which has no callback belonging to it, the
error is emitted as an <code>'error'</code> event on the connection object. This is
demonstrated in the example below:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>error</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>code</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;'ER_BAD_DB_ERROR'</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>USE&nbsp;name_of_db_that_does_not_exist</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Note: <code>'error'</code> events are special in node. If they occur without an attached
listener, a stack trace is printed and your process is killed.</p>
<p><strong>tl;dr:</strong> This module does not want you to deal with silent failures. You
should always provide callbacks to your method calls. If you want to ignore
this advice and suppress unhandled errors, you can do this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;I&nbsp;am&nbsp;Chuck&nbsp;Norris:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>error</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h2 id="user-content-exception-safety" class="deep-link"><a href="https://www.npmjs.com/package/mysql#exception-safety">Exception Safety</a></h2>
<p>This module is exception safe. That means you can continue to use it, even if
one of your callback functions throws an error which you're catching using
'uncaughtException' or a domain.</p>
<h2 id="user-content-type-casting" class="deep-link"><a href="https://www.npmjs.com/package/mysql#type-casting">Type casting</a></h2>
<p>For your convenience, this driver will cast mysql types into native JavaScript
types by default. The following mappings exist:</p>
<h3 id="user-content-number" class="deep-link"><a href="https://www.npmjs.com/package/mysql#number">Number</a></h3>
<ul>
<li>TINYINT</li>
<li>SMALLINT</li>
<li>INT</li>
<li>MEDIUMINT</li>
<li>YEAR</li>
<li>FLOAT</li>
<li>DOUBLE</li>
</ul>
<h3 id="user-content-date" class="deep-link"><a href="https://www.npmjs.com/package/mysql#date">Date</a></h3>
<ul>
<li>TIMESTAMP</li>
<li>DATE</li>
<li>DATETIME</li>
</ul>
<h3 id="user-content-buffer" class="deep-link"><a href="https://www.npmjs.com/package/mysql#buffer">Buffer</a></h3>
<ul>
<li>TINYBLOB</li>
<li>MEDIUMBLOB</li>
<li>LONGBLOB</li>
<li>BLOB</li>
<li>BINARY</li>
<li>VARBINARY</li>
<li>BIT (last byte will be filled with 0 bits as necessary)</li>
</ul>
<h3 id="user-content-string" class="deep-link"><a href="https://www.npmjs.com/package/mysql#string">String</a></h3>
<p><strong>Note</strong> text in the binary character set is returned as <code>Buffer</code>, rather
than a string.</p>
<ul>
<li>CHAR</li>
<li>VARCHAR</li>
<li>TINYTEXT</li>
<li>MEDIUMTEXT</li>
<li>LONGTEXT</li>
<li>TEXT</li>
<li>ENUM</li>
<li>SET</li>
<li>DECIMAL (may exceed float precision)</li>
<li>BIGINT (may exceed float precision)</li>
<li>TIME (could be mapped to Date, but what date would be set?)</li>
<li>GEOMETRY (never used those, get in touch if you do)</li>
</ul>
<p>It is not recommended (and may go away / change in the future) to disable type
casting, but you can currently do so on either the connection:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>mysql</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>typeCast</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>Or on the query level:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;options&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>...</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;typeCast</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;query&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>results</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>You can also pass a function and handle type casting yourself. You're given some
column information like database, table and name and also type and length. If you
just want to apply a custom type casting to a specific type you can do it and then
fallback to the default. Here's an example of converting <code>TINYINT(1)</code> to boolean:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>connection</span><span class="meta delimiter method period js"><span>.</span></span><span>query</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;sql</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>...</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>typeCast</span></span><span>:&nbsp;</span><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation definition begin js"><span>(</span></span><span class="variable function js"><span>field</span></span><span>,&nbsp;</span><span class="variable function js"><span>next</span></span><span class="punctuation definition end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>field</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>TINY</span><span class="punctuation definition string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;field</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="constant numeric js"><span>1</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>field</span><span class="meta delimiter method period js"><span>.</span></span><span>string</span><span class="meta brace round js"><span>(</span><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>1</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;1&nbsp;=&nbsp;true,&nbsp;0&nbsp;=&nbsp;false</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;next</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p><strong>WARNING: YOU MUST INVOKE the parser using one of these three field functions in your custom typeCast callback. They can only be called once. (see <a href="https://github.com/felixge/node-mysql/issues/539">#539</a> for discussion)</strong></p>
<pre><code><pre class="editor editor-colors"><div class="line"><span class="text"><span>field.string()</span></span></div><div class="line"><span class="text"><span>field.buffer()</span></span></div><div class="line"><span class="text"><span>field.geometry()</span></span></div></pre></code></pre>
<p>are aliases for</p>
<pre><code><pre class="editor editor-colors"><div class="line"><span class="text"><span>parser.parseLengthCodedString()</span></span></div><div class="line"><span class="text"><span>parser.parseLengthCodedBuffer()</span></span></div><div class="line"><span class="text"><span>parser.parseGeometryValue()</span></span></div></pre></code></pre>
<p><strong>You can find which field function you need to use by looking at: <a href="https://github.com/felixge/node-mysql/blob/master/lib/protocol/packets/RowDataPacket.js#L41">RowDataPacket.prototype._typeCast</a></strong></p>
<h2 id="user-content-connection-flags" class="deep-link"><a href="https://www.npmjs.com/package/mysql#connection-flags">Connection Flags</a></h2>
<p>If, for any reason, you would like to change the default connection flags, you
can use the connection option <code>flags</code>. Pass a string with a comma separated list
of items to add to the default flags. If you don't want a default flag to be used
prepend the flag with a minus sign. To add a flag that is not in the default list,
just write the flag name, or prefix it with a plus (case insensitive).</p>
<p><strong>Please note that some available flags that are not supported (e.g.: Compression),
are still not allowed to be specified.</strong></p>
<h3 id="user-content-example" class="deep-link"><a href="https://www.npmjs.com/package/mysql#example">Example</a></h3>
<p>The next example blacklists FOUND_ROWS flag from default connection flags.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>"</span></span><span>mysql://localhost/test?flags=-FOUND_ROWS</span><span class="punctuation definition string end js"><span>"</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<h3 id="user-content-default-flags" class="deep-link"><a href="https://www.npmjs.com/package/mysql#default-flags">Default Flags</a></h3>
<p>The following flags are sent by default on a new connection:</p>
<ul>
<li><code>CONNECT_WITH_DB</code> - Ability to specify the database on connection.</li>
<li><code>FOUND_ROWS</code> - Send the found rows instead of the affected rows as <code>affectedRows</code>.</li>
<li><code>IGNORE_SIGPIPE</code> - Old; no effect.</li>
<li><code>IGNORE_SPACE</code> - Let the parser ignore spaces before the <code>(</code> in queries.</li>
<li><code>LOCAL_FILES</code> - Can use <code>LOAD DATA LOCAL</code>.</li>
<li><code>LONG_FLAG</code></li>
<li><code>LONG_PASSWORD</code> - Use the improved version of Old Password Authentication.</li>
<li><code>MULTI_RESULTS</code> - Can handle multiple resultsets for COM_QUERY.</li>
<li><code>ODBC</code> Old; no effect.</li>
<li><code>PROTOCOL_41</code> - Uses the 4.1 protocol.</li>
<li><code>PS_MULTI_RESULTS</code> - Can handle multiple resultsets for COM_STMT_EXECUTE.</li>
<li><code>RESERVED</code> - Old flag for the 4.1 protocol.</li>
<li><code>SECURE_CONNECTION</code> - Support native 4.1 authentication.</li>
<li><code>TRANSACTIONS</code> - Asks for the transaction status flags.</li>
</ul>
<p>In addition, the following flag will be sent if the option <code>multipleStatements</code>
is set to <code>true</code>:</p>
<ul>
<li><code>MULTI_STATEMENTS</code> - The client may send multiple statement per query or
statement prepare.</li>
</ul>
<h3 id="user-content-other-available-flags" class="deep-link"><a href="https://www.npmjs.com/package/mysql#other-available-flags">Other Available Flags</a></h3>
<p>There are other flags available. They may or may not function, but are still
available to specify.</p>
<ul>
<li>COMPRESS</li>
<li>INTERACTIVE</li>
<li>NO_SCHEMA</li>
<li>PLUGIN_AUTH</li>
<li>REMEMBER_OPTIONS</li>
<li>SSL</li>
<li>SSL_VERIFY_SERVER_CERT</li>
</ul>
<h2 id="user-content-debugging-and-reporting-problems" class="deep-link"><a href="https://www.npmjs.com/package/mysql#debugging-and-reporting-problems">Debugging and reporting problems</a></h2>
<p>If you are running into problems, one thing that may help is enabling the
<code>debug</code> mode for the connection:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>debug</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>This will print all incoming and outgoing packets on stdout. You can also restrict debugging to
packet types by passing an array of types to debug:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;connection&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;mysql</span><span class="meta delimiter method period js"><span>.</span></span><span>createConnection</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>debug</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>ComQueryPacket</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>RowDataPacket</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
<p>to restrict debugging to the query and data packets.</p>
<p>If that does not help, feel free to open a GitHub issue. A good GitHub issue
will have:</p>
<ul>
<li>The minimal amount of code required to reproduce the problem (if possible)</li>
<li>As much debugging output and information about your environment (mysql
version, node version, os, etc.) as you can gather.</li>
</ul>
<h2 id="user-content-running-tests" class="deep-link"><a href="https://www.npmjs.com/package/mysql#running-tests">Running tests</a></h2>
<p>The test suite is split into two parts: unit tests and integration tests.
The unit tests run on any machine while the integration tests require a
MySQL server instance to be setup.</p>
<h3 id="user-content-running-unit-tests" class="deep-link"><a href="https://www.npmjs.com/package/mysql#running-unit-tests">Running unit tests</a></h3>
<pre><code class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span>$&nbsp;FILTER=unit&nbsp;npm&nbsp;</span><span class="support function builtin shell"><span>test</span></span></span></div></pre></code></pre>
<h3 id="user-content-running-integration-tests" class="deep-link"><a href="https://www.npmjs.com/package/mysql#running-integration-tests">Running integration tests</a></h3>
<p>Set the environment variables <code>MYSQL_DATABASE</code>, <code>MYSQL_HOST</code>, <code>MYSQL_PORT</code>,
<code>MYSQL_USER</code> and <code>MYSQL_PASSWORD</code>. Then run <code>npm test</code>.</p>
<p>For example, if you have an installation of mysql running on localhost:3306
and no password set for the <code>root</code> user, run:</p>
<pre><code class="highlight sh"><pre class="editor editor-colors"><div class="line"><span class="source shell"><span>$&nbsp;mysql&nbsp;-u&nbsp;root&nbsp;-e&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>"</span></span><span>CREATE&nbsp;DATABASE&nbsp;IF&nbsp;NOT&nbsp;EXISTS&nbsp;node_mysql_test</span><span class="punctuation definition string end shell"><span>"</span></span></span></span></div><div class="line"><span class="source shell"><span>$&nbsp;MYSQL_HOST=localhost&nbsp;MYSQL_PORT=3306&nbsp;MYSQL_DATABASE=node_mysql_test&nbsp;MYSQL_USER=root&nbsp;MYSQL_PASSWORD=&nbsp;FILTER=integration&nbsp;npm&nbsp;</span><span class="support function builtin shell"><span>test</span></span></span></div></pre></code></pre>
<h2 id="user-content-todo" class="deep-link"><a href="https://www.npmjs.com/package/mysql#todo">Todo</a></h2>
<ul>
<li>Prepared statements</li>
<li>Support for encodings other than UTF-8 / ASCII</li>
</ul>

  </div>

</div>

<div class="sidebar">

    <div class="promotion" data-promotion-id="519" data-promotion-spot="packagePage"><div class="marketing">
<h3 id="marketing-texthed"><a href="http://npm.me/a2" title="npm On-Site">learn more about npm On-Site</a></h3>

<p>Private npm registry for enterprise customers. Free 30-day trial.  <a href="http://npm.me/a2" title="learn more about npm On-Site">Learn more</a></p></div></div>

    <div class="autoselect-wrapper npm-install icon-download">
      <input type="text" value="npm install mysql" readonly="">
      <p><a href="https://www.npmjs.com/package/mysql/tutorial">how? learn more</a></p>
    </div>

  <ul class="box">

      <li class="last-publisher">
          <a href="https://www.npmjs.com/~dougwilson">
            <img src="./96_mysql_nodejs_files/c4b64c6e47d970bb0d07a2b9d559be9b" alt="dougwilson">
            <span>dougwilson</span>
          </a>
          published
          <span data-date="2016-01-13T02:46:19.255Z" data-date-format="relative">2 months ago</span>
      </li>

    <li>
      <strong>2.10.2</strong>
      is the latest
        of 54 releases
    </li>

      <li>
        <a href="https://github.com/felixge/node-mysql">github.com/felixge/node-mysql</a>
      </li>


      <li>
          <a href="http://spdx.org/licenses/MIT">MIT</a>
          <img class="osi" alt="Licensed on OSI-approved terms" src="./96_mysql_nodejs_files/osi.svg">
      </li>

  </ul>

    <h3 title="collaborators">
      <a href="https://www.npmjs.com/package/mysql/access">Collaborators</a>
    </h3>

    <ul class="humans collaborators">
        <li>
            <a href="https://www.npmjs.com/~felixge" rel="tipsy" original-title="felixge">
                <img src="./96_mysql_nodejs_files/23968f0ca75b13463d2db5343e5c2096" alt="felixge">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~egorfine" rel="tipsy" original-title="egorfine">
                <img src="./96_mysql_nodejs_files/1bc85e9a284f4518d353b95ede4c6a38" alt="egorfine">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~dresende" rel="tipsy" original-title="dresende">
                <img src="./96_mysql_nodejs_files/8953325768912c213e3805695ad8d6a9" alt="dresende">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~femto113" rel="tipsy" original-title="femto113">
                <img src="./96_mysql_nodejs_files/a7edff4fd8b0c1a9d2cffe9699acf1de" alt="femto113">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~nate.lillich" rel="tipsy" original-title="nate.lillich">
                <img src="./96_mysql_nodejs_files/ba7a03fd78c2e95962fde04d882d1ed9" alt="nate.lillich">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~tolgaek" rel="tipsy" original-title="tolgaek">
                <img src="./96_mysql_nodejs_files/e88cb5530ab2eed66516e8f18400e4ac" alt="tolgaek">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~sidorares" rel="tipsy" original-title="sidorares">
                <img src="./96_mysql_nodejs_files/179b3fc001b3edc4c71ebcdc5bb96527" alt="sidorares">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~seanmonstar" rel="tipsy" original-title="seanmonstar">
                <img src="./96_mysql_nodejs_files/dfb248d98bc7c238fccd5aad53624eab" alt="seanmonstar">
            </a>
        </li>
        <li>
            <a href="https://www.npmjs.com/~dougwilson" rel="tipsy" original-title="dougwilson">
                <img src="./96_mysql_nodejs_files/c4b64c6e47d970bb0d07a2b9d559be9b" alt="dougwilson">
            </a>
        </li>


    </ul>

    <h3>Stats</h3>
    <ul class="box">

        <li>
          <strong class="pretty-number daily-downloads">17,244</strong>
          downloads in the last day
        </li>
        <li>
          <strong class="pretty-number weekly-downloads">99,913</strong>
          downloads in the last week
        </li>
        <li>
          <strong class="pretty-number monthly-downloads">402,211</strong>
          downloads in the last month
        </li>

        <li id="issues" data-ghapi="https://api.github.com/repos/felixge/node-mysql">
          <span class="original" style="display: none;">Have an issue? <a href="https://github.com/felixge/node-mysql/issues">73 open issues</a></span>
            <span class="enhanced" style="">
              <a href="https://github.com/felixge/node-mysql/issues">73 open issues</a> on GitHub
            </span>
        </li>

        <li id="pull_requests" style="">
          <a href="https://github.com/felixge/node-mysql/pulls">11 open pull requests</a> on GitHub
        </li>

    </ul>

      <h3>Try it out</h3>
      <ul class="box">
        <li class="tonicdev"><a href="https://tonicdev.com/npm/mysql" target="_blank">Test mysql in your browser.</a></li>
      </ul>

  <h3>Keywords</h3>
  <p class="list-of-links">
      None
  </p>

  <h3>Dependencies (2)</h3>
  <p class="list-of-links">
          <a href="https://www.npmjs.com/package/readable-stream">readable-stream</a>,
                <a href="https://www.npmjs.com/package/bignumber.js">bignumber.js</a>
  </p>

    <h3><a href="https://www.npmjs.com/browse/depended/mysql">Dependents</a></h3>
    <p class="list-of-links dependents">

          <a href="https://www.npmjs.com/package/student-queue-mysql-plugin">student-queue-mysql-plugin</a>,
        
          <a href="https://www.npmjs.com/package/webcredits">webcredits</a>,
        
          <a href="https://www.npmjs.com/package/modli-mysql">modli-mysql</a>,
        
          <a href="https://www.npmjs.com/package/sego">sego</a>,
        
          <a href="https://www.npmjs.com/package/node-data-mapper">node-data-mapper</a>,
        
          <a href="https://www.npmjs.com/package/mysql-extractor">mysql-extractor</a>,
        
          <a href="https://www.npmjs.com/package/pdns-mysql">pdns-mysql</a>,
        
          <a href="https://www.npmjs.com/package/loopback-connector-mysql">loopback-connector-mysql</a>,
        
          <a href="https://www.npmjs.com/package/laundry">laundry</a>,
        
          <a href="https://www.npmjs.com/package/jm-ez-mysql">jm-ez-mysql</a>,
        
          <a href="https://www.npmjs.com/package/xlsdb">xlsdb</a>,
        
          <a href="https://www.npmjs.com/package/gcmon">gcmon</a>,
        
          <a href="https://www.npmjs.com/package/formio">formio</a>,
        
          <a href="https://www.npmjs.com/package/swallowjs">swallowjs</a>,
        
          <a href="https://www.npmjs.com/package/corgiserver">corgiserver</a>,
        
          <a href="https://www.npmjs.com/package/arcane-middleware-orm">arcane-middleware-orm</a>,
        
          <a href="https://www.npmjs.com/package/apeman-demo-web">apeman-demo-web</a>,
        
          <a href="https://www.npmjs.com/package/pocostick">pocostick</a>,
        
          <a href="https://www.npmjs.com/package/node-express-mysql">node-express-mysql</a>,
        
          <a href="https://www.npmjs.com/package/mysql-chassis">mysql-chassis</a>,
        
          <a href="https://www.npmjs.com/package/igo">igo</a>,
        
          <a href="https://www.npmjs.com/package/kypseli">kypseli</a>,
        
          <a href="https://www.npmjs.com/package/resolve_sql">resolve_sql</a>,
        
          <a href="https://www.npmjs.com/package/autoredis">autoredis</a>,
        
          <a href="https://www.npmjs.com/package/xlatte">xlatte</a>,
        
          <a href="https://www.npmjs.com/package/nodeadmin">nodeadmin</a>,
        
          <a href="https://www.npmjs.com/package/tables">tables</a>,
        
          <a href="https://www.npmjs.com/package/resolve_query_builder">resolve_query_builder</a>,
        
          <a href="https://www.npmjs.com/package/sails-mysql">sails-mysql</a>,
        
          <a href="https://www.npmjs.com/package/syncorm">syncorm</a>,
        
          <a href="https://www.npmjs.com/package/koapi">koapi</a>,
        
          <a href="https://www.npmjs.com/package/service-scaff">service-scaff</a>,
        
          <a href="https://www.npmjs.com/package/cody">cody</a>,
        
          <a href="https://www.npmjs.com/package/upload-images">upload-images</a>,
        
          <a href="https://www.npmjs.com/package/lei-mysql">lei-mysql</a>,
        
          <a href="https://www.npmjs.com/package/rocket-api">rocket-api</a>,
        
          <a href="https://www.npmjs.com/package/rbac-knex">rbac-knex</a>,
        
          <a href="https://www.npmjs.com/package/dimeshift">dimeshift</a>,
        
          <a href="https://www.npmjs.com/package/dl">dl</a>,
        
          <a href="https://www.npmjs.com/package/importer-core">importer-core</a>,
        
          <a href="https://www.npmjs.com/package/spark-mysql-protocol">spark-mysql-protocol</a>,
        
          <a href="https://www.npmjs.com/package/journal_database_ex_df">journal_database_ex_df</a>,
        
          <a href="https://www.npmjs.com/package/geotabuladb">geotabuladb</a>,
        
          <a href="https://www.npmjs.com/package/app.io">app.io</a>,
        
          <a href="https://www.npmjs.com/package/mysql2rethinkdb">mysql2rethinkdb</a>,
        
          <a href="https://www.npmjs.com/package/thinkjs">thinkjs</a>,
        
          <a href="https://www.npmjs.com/package/five-bells-ledger">five-bells-ledger</a>,
        
          <a href="https://www.npmjs.com/package/migrit">migrit</a>,
        
          <a href="https://www.npmjs.com/package/k7-sequelize">k7-sequelize</a>,
                  <a href="https://www.npmjs.com/package/stream-dev-tools">stream-dev-tools</a>,
        <a href="https://www.npmjs.com/browse/depended/mysql">and more</a>
    </p>

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "SoftwareApplication",
      "name": "mysql",
      "description": "A node.js driver for mysql. It is written in JavaScript, does not require compiling, and is 100% MIT licensed.",
      "url": "https://www.npmjs.com/package/mysql",
      "keywords": "",
      "applicationCategory": "DeveloperApplication",
      "offers": {
         "@type": "Offer",
         "price": "0.00"
      }
    }
  </script>

    <div class="hiring-container" data-template="sidebar"><div class="ad">
  <p>
    <a href="https://angel.co/edyn/jobs" title="Edyn">Edyn</a> is hiring.
    <a class="quiet" href="https://www.npmjs.com/whoshiring">View more</a>
  </p>
</div></div>

</div>


    </div>

  <footer>

    <div class="container">


        <ul class="columnar">
          <li>
            <h3>You Need Help</h3>
            <ul class="links">
              <li><a href="https://docs.npmjs.com/">Documentation</a></li>
              <li><a href="https://www.npmjs.com/support">Support / Contact Us</a></li>
              <li><a href="http://status.npmjs.org/">Registry Status</a></li>
              <li><a href="https://github.com/npm/newww/issues">Website Issues</a></li>
              <li><a href="https://github.com/npm/npm/issues">CLI Issues</a></li>
              <li><a href="https://www.npmjs.com/policies/security">Security</a></li>
            </ul>
          </li>

          <li>
            <h3>About npm</h3>
            <ul class="links">
              <li><a href="https://www.npmjs.com/about">About npm, Inc</a></li>
              <li><a href="https://www.npmjs.com/jobs">Jobs</a></li>
              <li><a href="https://www.npmjs.com/npm-weekly">npm Weekly</a></li>
              <li><a href="http://blog.npmjs.org/">Blog</a></li>
              <li><a href="https://twitter.com/npmjs">Twitter</a></li>
              <li><a href="https://github.com/npm">GitHub</a></li>
            </ul>
          </li>

          <li>
            <h3>Legal Stuff</h3>
            <ul class="links">
              <li><a href="https://www.npmjs.com/policies/terms">Terms of Use</a></li>
              <li><a href="https://www.npmjs.com/policies/conduct">Code of Conduct</a></li>
              <li><a href="https://www.npmjs.com/policies/disputes">Package Name Disputes</a></li>
              <li><a href="https://www.npmjs.com/policies/privacy">Privacy Policy</a></li>
              <li><a href="https://www.npmjs.com/policies/receiving-reports">Reporting Abuse</a></li>
              <li><a href="https://www.npmjs.com/policies/">Other policies</a></li>
            </ul>
          </li>
        </ul>


    </div>

    <div class="container centered">
      <a class="npm-loves-you" href="https://www.npmjs.com/">
        npm loves you
      </a>
    </div>

  </footer>
  
  <script defer="" src="./96_mysql_nodejs_files/vendor.min.a3c53b90.js"></script>
  <script defer="" async="" src="./96_mysql_nodejs_files/3318080746.js"></script>
  <script defer="" async="" src="./96_mysql_nodejs_files/elqCfg.min.js"></script><!-- Eloqua -->



<!-- pid=32586 bfc051e49dc803bd7af5e86e89eae21d143526ad https://www.npmjs.com www-13-west.internal.npmjs.com  -->
<div class="drop-down-menu-overlay" data-drop-down-menu="product-navigation"></div><div class="autocomplete-container" style="position: absolute; display: none; max-height: 400px; z-index: 9999;"><div class="autocomplete-suggestions" style="position: absolute; display: none; max-height: 400px; z-index: 9999;"></div></div></body></html>